<!DOCTYPE html>
<html lang="en" manifest="/manifest.appcache">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Working with databases</title>
    <link rel="alternate" title="PouchDB, the JavaScript Database that Syncs!" type="application/rss+xml" href="/feed.xml">
    <link rel="stylesheet" href="/static/css/pouchdb.css" />
    <meta name="theme-color" content="#6ccb99">
    <meta name="msapplication-TileColor" content="#6ccb99">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-42479701-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon"/>
  </head>

  <body data-spy="scroll" data-target="#sidebar">

    <header role="banner">

      <a href="https://github.com/pouchdb/pouchdb" target="_blank">
         <div class="ribbon">GitHub</div>
      </a>

      <div class="container">

        <a class="logo" href="/">
          <div class="logo-img"></div>
          <span class='logo-type'>PouchDB</span>
        </a>

        <ul class='nav nav-header nav-pills' role="navigation">
          <li>
            <a class='btn btn-link btn-lg' href="/blog/">Blog</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/guides/">Guides</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/api.html">API</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/learn.html">Learn</a>
          </li>
          <li>
            <a
                class='btn btn-primary btn-lg'
                href="https://github.com/pouchdb/pouchdb/releases/download/5.2.0/pouchdb-5.2.0.min.js"
            >
                Download <strong>v5.2.0</strong>
            </a>
          </li>
        </ul>

      </div>

    </header>
    
      <div class="page-head">

        <div class="container">

          <h1 class="page-title">Working with databases</h1>
          
            <span class="h1">
              
  

<a
  data-toggle="tooltip"
  data-placement="top"
  title="Edit this on Github"
  class="icon-edit"
  href="https://github.com/pouchdb/pouchdb/edit/master/docs/_guides/databases.md"
  target="_blank"
></a>

            </span>
          
          

        </div>

      </div>
    

    <div role="main">
      <article>
  <div class="container">
    <div class="row">
        <div id="sidebar" class="col-sm-3 nav-sidebar-wrapper">
          <ul class="nav nav-silent nav-sidebar" role="navigation">
            

    
    
        
    
    <li >
    <a href="/guides/">Intro</a>
</li>


    
    
    <li >
    <a href="/guides/setup-couchdb.html">Setting up CouchDB</a>
</li>


    
    
    <li >
    <a href="/guides/setup-pouchdb.html">Setting up PouchDB</a>
</li>


    
    
    <li  class="active" >
    <a href="/guides/databases.html">Working with databases</a>
</li>


    
    
    <li >
    <a href="/guides/documents.html">Working with documents</a>
</li>


    
    
    <li >
    <a href="/guides/async-code.html">Asynchronous code</a>
</li>


    
    
        
    
    <li >
    <a href="/guides/updating-deleting.html">Updating/deleting documents</a>
</li>


    
    
    <li >
    <a href="/guides/bulk-operations.html">Bulk operations</a>
</li>


    
    
    <li >
    <a href="/guides/attachments.html">Working with attachments</a>
</li>


    
    
    <li >
    <a href="/guides/replication.html">Replication</a>
</li>


    
    
    <li >
    <a href="/guides/conflicts.html">Conflicts</a>
</li>


    
    
    <li >
    <a href="/guides/changes.html">Changes feed</a>
</li>


    
    
    <li >
    <a href="/guides/queries.html">Map/reduce queries</a>
</li>


    
    
    <li >
    <a href="/guides/compact-and-destroy.html">Compacting and destroying</a>
</li>


    
    
    <li >
    <a href="/guides/local-documents.html">Local documents</a>
</li>



          </ul>
        </div>

        <div class="col-sm-9" role="main">
          <p>PouchDB databases come in two flavors: local and remote.</p>

<div id='local–databases'></div>

<p><a class='h2 anchor' href='#local–databases' name='local–databases'>
Local databases
</a></p>

<p>To create a local database, you simply call <code>new PouchDB</code> and give it a name:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PouchDB</span><span class="p">(</span><span class="s1">&#39;kittens&#39;</span><span class="p">);</span>
</code></pre></div>
<p>You can see a <strong><a href="http://bl.ocks.org/nolanlawson/bddac54b92c2d8d39241">live example</a></strong> of this code.</p>

<div class="alert alert-info">


<div class="alert-text">


<strong>Protip:</strong> whenever you see a live example in this guide, you can download it to follow along at home! For example, to run this example, just enter the following commands in your command prompt:
<p/>
<code>
<br/>git clone https://gist.github.com/bddac54b92c2d8d39241.git kittens
<br/>cd kittens
<br/>python -m SimpleHTTPServer # for Python 2
<br/>python -m http.server      # for Python 3
</code>
<p/>
Now the site is up and running at <a href='http://localhost:8000'>http://localhost:8000</a>. To find the correct <code>gist.github.com</code> URL, just click the "block" number at the top of the page.

</div></div>

<div id='remote-databases'></div>

<p><a class='h2 anchor' href='#remote-databases' name='remote-databases'>
Remote databases
</a></p>

<p>To create a remote database, you call <code>new PouchDB</code> and give it a path to a database in CouchDB.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PouchDB</span><span class="p">(</span><span class="s1">&#39;http://localhost:5984/kittens&#39;</span><span class="p">);</span>
</code></pre></div>
<div class="alert alert-info">


<div class="alert-text">

<strong>note:</strong> The remote database will not be created until you do an API call, e.g.: <code>db.info()</code>. The reason behind that is that the <code>PouchDB</code> constructor is completely
synchronous, for ease of error handling (i.e. no asynchronous errors).
</div></div>

<p>The structure of a CouchDB URL is very simple:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://     localhost:5984     /kittens
⌞_____⌟     ⌞____________⌟      ⌞_____⌟
   |              |                |
Protocol     Where CouchDB       database
(https if    itself is           name
Cloudant)    hosted
</code></pre></div>
<p>If the remote database doesn&#39;t exist, then PouchDB will create it for you.</p>

<p>You can verify that your database is working by visiting the URL  <a href="http://localhost:5984/kittens">http://localhost:5984/kittens</a>.  You should see something like this:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;db_name&quot;</span><span class="o">:</span><span class="s2">&quot;kittens&quot;</span><span class="p">,</span><span class="s2">&quot;doc_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;doc_del_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;purge_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;compact_running&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;disk_size&quot;</span><span class="o">:</span><span class="mi">79</span><span class="p">,</span><span class="s2">&quot;data_size&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;instance_start_time&quot;</span><span class="o">:</span><span class="s2">&quot;1410722558431975&quot;</span><span class="p">,</span><span class="s2">&quot;disk_format_version&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="s2">&quot;committed_update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span>
</code></pre></div>
<p>If instead you see:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="o">:</span><span class="s2">&quot;not_found&quot;</span><span class="p">,</span><span class="s2">&quot;reason&quot;</span><span class="o">:</span><span class="s2">&quot;no_db_file&quot;</span><span class="p">}</span>
</code></pre></div>
<p>Then check to make sure that your remote CouchDB has started up correctly. Common errors (such as CORS) are <a href="/errors.html">listed here</a>.</p>

<div id='get-basic-info-about-the–database'></div>

<p><a class='h2 anchor' href='#get-basic-info-about-the–database' name='get-basic-info-about-the–database'>
Get basic info about the database
</a></p>

<p>You can see basic information about the database by using the <code>info()</code> method.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">db</span><span class="p">.</span><span class="nx">info</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">info</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">info</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
<p>The local database should show something like:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;doc_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;db_name&quot;</span><span class="o">:</span><span class="s2">&quot;kittens&quot;</span><span class="p">}</span>
</code></pre></div>
<p>The remote database may have a bit more information:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;db_name&quot;</span><span class="o">:</span><span class="s2">&quot;kittens&quot;</span><span class="p">,</span><span class="s2">&quot;doc_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;doc_del_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;purge_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;compact_running&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;disk_size&quot;</span><span class="o">:</span><span class="mi">79</span><span class="p">,</span><span class="s2">&quot;data_size&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;instance_start_time&quot;</span><span class="o">:</span><span class="s2">&quot;1410722558431975&quot;</span><span class="p">,</span><span class="s2">&quot;disk_format_version&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="s2">&quot;committed_update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span>
</code></pre></div>
<p>The most important bits of information are:</p>

<ul>
<li><code>doc_count</code>: the number of undeleted documents in the database</li>
<li><code>db_name</code>: the name of the database</li>
</ul>

<div id='debugging'></div>

<p><a class='h2 anchor' href='#debugging' name='debugging'>
Debugging
</a></p>

<p>When you create a PouchDB database, there are many ways to debug and inspect it.</p>

<h3>PouchDB Inspector</h3>

<p>PouchDB Inspector is an add-on for Chrome and Firefox that allows you to inspect your local databases.</p>

<ul>
<li><a href="https://chrome.google.com/webstore/detail/pouchdb-inspector/hbhhpaojmpfimakffndmpmpndcmonkfa">Download PouchDB Inspector for Chrome</a></li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/pouchdb-inspector/">Download PouchDB Inspector for Firefox</a></li>
</ul>

<p><a href="/static/img/pouchdb_inspector.png" target="_blank">
  <img class="img-responsive"  src="/static/img/pouchdb_inspector.png" alt="PouchDB Inspector in Chrome" />
</a></p>

<p>It provides the full &quot;Fauxton&quot; interface, which is the same interface you will see in CouchDB and PouchDB Server.</p>

<h3>IndexedDB/WebSQL inspectors</h3>

<p>You can also use the normal developer tools to see what your database looks like under the hood.</p>

<p>In Chrome, just choose <em>Overflow icon</em> &#9776; &#8594; <em>Tools</em> &#8594; <em>Developer Tools</em>. Then click the <em>Resources</em> tab, then <em>IndexedDB</em>, and you should see the following:</p>

<p><a href="/static/img/dev_tools.png" target="_blank">
  <img class="img-responsive"  src="/static/img/dev_tools.png" alt="Chrome Developer Tools" />
</a></p>

<p>This is the raw IndexedDB representation of your PouchDB, so it is very fine-grained compared to what PouchDB Inspector shows. However, you may find it useful.</p>

<p>In Safari, your database will be under <em>Develop</em> &#8594; <em>Show Web Inspector</em> &#8594; <em>Resources</em> &#8594; <em>Databases</em>.</p>

<p><a href="/static/img/safari_inspector.png" target="_blank">
  <img class="img-responsive"  src="/static/img/safari_inspector.png" alt="Web Inspector in Safari" />
</a></p>

<h3>Debug logging</h3>

<p>You can also enable debug logging by doing:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">PouchDB</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>
</code></pre></div>
<p>And then disable it by doing:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">PouchDB</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
</code></pre></div>
<div id='deleting-your-local-database'></div>

<p><a class='h2 anchor' href='#deleting-your-local-database' name='deleting-your-local-database'>
Deleting your local database
</a></p>

<p>During development, it&#39;s often useful to destroy the local database, so you can see what your users will experience when they visit your site for the first time. A page refresh is not enough, because the data will still be there!</p>

<p>In Chrome, you can use the <a href="https://chrome.google.com/webstore/detail/clearbrowserdata/apehfighfmpoieeniallefdeibodgmmb">ClearBrowserData extension</a>, which will add a trashcan icon to your toolbar, which you can click to delete all local data (IndexedDB, WebSQL, LocalStorage, cookies, etc.).</p>

<p>In Firefox, you can use the <a href="https://addons.mozilla.org/en-US/firefox/addon/clear-recent-history/">Clear Recent History+ add-on</a>, so when you right-click a page you can quickly clear all data.</p>

<p>In Safari, you can simply click <em>Safari</em> &#8594; <em>Clear History and Website Data</em>.</p>

<div id='differences-between-the-local-and-remote-databases'></div>

<p><a class='h2 anchor' href='#differences-between-the-local-and-remote-databases' name='differences-between-the-local-and-remote-databases'>
Differences between the local and remote databases
</a></p>

<p>When you create a local PouchDB database, it uses whatever underlying datastore is available - IndexedDB in most browsers, WebSQL in older browsers, and LevelDB in Node.js.</p>

<p>When you create a remote PouchDB database, it communicates directly with the remote database &ndash; CouchDB, Cloudant, Couchbase, etc.</p>

<p>The goal of PouchDB is to allow you to seamlessly communicate with one or the other. You should not notice many differences between the two, except that of course the local one is much faster!</p>

<div id='related-api-documentation'></div>

<p><a class='h2 anchor' href='#related-api-documentation' name='related-api-documentation'>
Related API documentation
</a></p>

<ul>
<li><a href="/api.html#create_database">new PouchDB() (constructor)</a></li>
<li><a href="/api.html#debug_mode">Debug mode</a></li>
</ul>

<div id='next'></div>

<p><a class='h2 anchor' href='#next' name='next'>
Next
</a></p>

<p>Now that you&#39;ve created some databases, let&#39;s put some documents in &#39;em!</p>




    

    

    

    
        
        

        <ul class="pager">
            
                <li class="previous">
                    <a href="/guides/setup-pouchdb.html">&larr; Setting up PouchDB</a>
                </li>
            
            
                <li class="next">
                    <a href="/guides/documents.html">Working with documents &rarr;</a>
                </li>
            
        </ul>
    

    

    

    

    

    

    

    

    

    

    

    


        <div>

    </div>

  </div>

</article>

    </div>

    <div class="icons">

      <div class="container">

        <div class="row">

          <div class='col-xs-4 col-md-offset-0 col-md-2'>
            <a href='https://twitter.com/pouchdb' target='_blank'>
              <div class="icon icon-twitter"></div>
              <span class="sr-only">PouchDB's Twitter</span>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://github.com/rvagg/node-levelup' target='_blank'>
              <div class="icon icon-leveldb"></div>
              <span class="sr-only">Node Levelup</span>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://github.com/pouchdb/pouchdb' target='_blank'>
              <div class="icon icon-github"></div>
              <span class="sr-only">PouchDB's Github Repo</span>
            </a>
            </div>

          <div class='col-xs-4 col-md-offset-0 col-md-2'>
            <a href='https://travis-ci.org/pouchdb/pouchdb' target='_blank'>
              <div class="icon icon-travis"></div>
              <span class="sr-only">PouchDB's Travis CI</span>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='http://couchdb.apache.org/' target='_blank'>
              <div class="icon icon-couchdb"></div>
              <span class="sr-only">CouchDB</span>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://saucelabs.com' target='_blank'>
              <div class="icon icon-saucelabs"></div>
              <span class="sr-only">Saucelabs</span>
            </a>
          </div>

        </div>

      </div>

    </div>

    <footer class="footer">

      <div class="container">

        <div class="row">

          <div class='col-sm-3'>
            <h3 class="nav-head">Learn</h3>
            <ul class='nav nav-silent'>
              <li><a href="/getting-started.html">Getting Started</a></li>
              <li><a href="/api.html">API Guide</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb/wiki">Wiki</a></li>
            </ul>
          </div>

          <div class='col-sm-3'>
            <h3 class="nav-head">Discuss</h3>
            <ul class='nav nav-silent'>
              <li><a href="https://groups.google.com/forum/#!forum/pouchdb">Mailing List</a></li>
              <li><a href="irc://freenode.net/#pouchdb">IRC</a></li>
              <li><a href="http://twitter.com/pouchdb">Twitter</a></li>
              <li><a href="http://stackoverflow.com/questions/tagged/pouchdb">StackOverflow</a></li>
            </ul>
          </div>

          <div class='col-sm-3'>
            <h3 class="nav-head">Contribute</h3>
            <ul class='nav nav-silent'>
              <li><a href="https://github.com/pouchdb/pouchdb/blob/master/CONTRIBUTING.md">Contributing</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb">Source</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb/issues">Issues</a></li>
              <li><a href="https://github.com/pouchdb/pouchdb/blob/master/LICENSE">Apache License</a></li>
            </ul>
          </div>

        </div>

      </div>

    </footer>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/static/js/code.min.js"></script>
    <script type="text/javascript" src="/static/js/stickyfill.min.js"></script>
    <script type="text/javascript" src="http://cdn.jsdelivr.net/pouchdb/latest/pouchdb.min.js"></script>
    <script type="text/javascript">
      var $navSidebarWrapper = $('.nav-sidebar-wrapper');
      if ($navSidebarWrapper.length) {
        $navSidebarWrapper.Stickyfill();
      }
      $('[data-toggle="tooltip"]').tooltip();
      function onCached(e) {
        if (applicationCache.status === 1) {
          giveIntro();
        }
      }

      function giveIntro() {
        console.log('%c\n..............................................................................\n.?I...........~+: ............................................................\n.???.........++++.............................................................\n:????+......+++++.............................................................\n.??????+++++++++:.................................H...........D..B............\n...????++++++++...................................H...........D..B............\n...=????++++++.......PPPPP...OOOO...U....U...CCCC.HHHHH...DDDDD..BBBBB........\n...?????+++++++......P...:P.OO...O..U....U..C.....H...H..D....D..B....B.......\n..???????+++++++ ....P. ..P.O....O..U....U.CC.....H...H..D....D..B....B.......\n..?????????????......P...:P.OO...O..U....U..C.....H...H..D....D..B....B.......\n...I??????????~......PPPPP...OOOO...=UUUUU...CCCC.H...H...DDDDD..BBBBB........\n....?????????~.......P.... ...................................................\n.....???????+........P........................................................\n......??????..................................................................\n..............................................................................\n..............................................................................\n..............................................................................', 'color: #4ec084');
        console.log('%c\nPouchDB itself is hosted at PouchDB.com!\nTo get started, try typing:\nvar db = new PouchDB(\'mydb\');', 'color: #4ec084');
      }
      function offerToReload() {
        $('.js-update-notification')
          .removeClass('btn-update-hidden')
          .on('click', function(){
            window.location.reload();
          });
      }
      if (window.applicationCache) {
        applicationCache.addEventListener('cached', onCached, false);
        applicationCache.addEventListener('noupdate', giveIntro, false);
        applicationCache.addEventListener('updateready', offerToReload, false);
      }
    </script>
    <button type="button" class="js-update-notification btn btn-primary btn-update btn-update-hidden">
      Content updated, reload now? ↻
    </button>
  </body>
</html>
